<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Product Management Dashboard</title>
    <link rel="stylesheet" href="css/styles.css" />
  </head>
  <body>
    <header class="hero">
      <div class="container">
        <h1>Inventory Overview</h1>
        <p class="subtitle">
          ตรวจสอบยอดสินค้าคงเหลือและสถานะสต็อกของระบบได้ที่นี่
        </p>
      </div>
    </header>

    <nav class="top-nav">
      <div class="container nav-container">
        <div class="nav-group">
          <button class="nav-link active" type="button" data-view-target="dashboard">
            แดชบอร์ดสต็อก
          </button>
          <button class="nav-link" type="button" data-view-target="management">
            จัดการสินค้า
          </button>
          <a class="nav-link nav-link--external" href="/customer" target="_blank" rel="noopener">
            หน้าแสดงสินค้า (ลูกค้า)
          </a>
        </div>
        <div class="nav-group nav-group--user">
          <span class="nav-user" id="currentUserEmail">กำลังโหลด...</span>
          <button class="nav-link nav-link--logout" type="button" id="logoutButton">
            ออกจากระบบ
          </button>
        </div>
      </div>
    </nav>

    <main class="container">
      <div class="view" data-view="dashboard">
        <section class="summary-grid" id="summaryGrid"></section>

        <section class="section">
          <div class="section-header">
            <h2>รายการสินค้าใกล้หมด</h2>
            <span class="badge" id="lowStockCount">0 รายการ</span>
          </div>
          <div class="card-table">
            <table>
              <thead>
                <tr>
                  <th>สินค้า</th>
                  <th>หมวดหมู่</th>
                  <th>คงเหลือ</th>
                  <th>หน่วย</th>
                </tr>
              </thead>
              <tbody id="lowStockTable">
                <tr>
                  <td colspan="4" class="placeholder">กำลังโหลดข้อมูล...</td>
                </tr>
              </tbody>
            </table>
          </div>
        </section>

        <section class="section">
          <div class="section-header">
            <h2>ภาพรวมตามหมวดหมู่</h2>
          </div>
          <div class="category-grid" id="categoryGrid"></div>
        </section>
      </div>

      <div class="view hidden" data-view="management">
        <section class="section">
          <div class="section-header">
            <h2>จัดการสินค้า</h2>
            <span class="badge" id="dataSourceIndicator">กำลังเชื่อมต่อ...</span>
          </div>
          <div class="management-grid">
            <article class="card form-card">
              <div class="form-header">
                <h3 id="formHeading">เพิ่มสินค้าใหม่</h3>
                <p class="hint" id="managementNotice">
                  กรอกข้อมูลสินค้าแล้วกดเพิ่มเพื่อบันทึกลงฐานข้อมูล
                </p>
              </div>
              <form id="productForm" autocomplete="off">
                <div class="form-grid">
                  <label>
                    รหัสสินค้า
                    <input
                      type="text"
                      name="id"
                      id="productId"
                      required
                      placeholder="PRD-011"
                    />
                  </label>
                  <label>
                    ชื่อสินค้า
                    <input
                      type="text"
                      name="name"
                      id="productName"
                      required
                      placeholder="ชื่อสินค้า"
                    />
                  </label>
                  <label>
                    หมวดหมู่
                    <input
                      type="text"
                      name="category"
                      id="productCategory"
                      required
                      placeholder="เช่น เบเกอรี่"
                    />
                  </label>
                  <label>
                    จำนวนคงเหลือ
                    <input
                      type="number"
                      name="stock"
                      id="productStock"
                      min="0"
                      required
                    />
                  </label>
                  <label>
                    หน่วย
                    <input
                      type="text"
                      name="unit"
                      id="productUnit"
                      required
                      placeholder="เช่น ชิ้น"
                    />
                  </label>
                  <label>
                    จุดสั่งซื้อซ้ำ
                    <input
                      type="number"
                      name="reorderPoint"
                      id="productReorder"
                      min="0"
                      required
                    />
                  </label>
                  <label>
                    ราคา (บาท)
                    <input
                      type="number"
                      name="price"
                      id="productPrice"
                      step="0.01"
                      min="0"
                      required
                    />
                  </label>
                  <label class="file-field">
                    รูปสินค้า
                    <div class="file-field__control">
                      <button class="btn btn-ghost" type="button" id="imageUploadButton">
                        อัปโหลดรูป
                      </button>
                      <button
                        class="btn btn-ghost file-field__clear hidden"
                        type="button"
                        id="imageClearButton"
                      >
                        ลบรูป
                      </button>
                      <span class="file-field__filename" id="imageFileName">
                        ยังไม่ได้เลือกรูป
                      </span>
                    </div>
                    <input
                      type="file"
                      id="productImageFile"
                      accept="image/*"
                      class="file-field__input"
                    />
                    <input type="hidden" name="imageUrl" id="productImageUrl" />
                    <div class="file-field__preview" id="productImagePreview">
                      <span class="file-field__placeholder">
                        รูปตัวอย่างจะแสดงที่นี่
                      </span>
                    </div>
                  </label>
                </div>
                <div class="form-actions">
                  <button
                    class="btn btn-primary"
                    type="submit"
                    id="submitButton"
                  >
                    เพิ่มสินค้า
                  </button>
                  <button
                    class="btn btn-ghost hidden"
                    type="button"
                    id="cancelEditButton"
                  >
                    ยกเลิกการแก้ไข
                  </button>
                </div>
              </form>
              <div class="form-status" id="formStatus" role="status"></div>
            </article>
          </div>
        </section>

        <section class="section">
          <div class="section-header">
            <h2>รายการสินค้าทั้งหมด</h2>
            <span class="badge" id="productCount">0 รายการ</span>
          </div>
          <div class="card-table">
            <table>
              <thead>
                <tr>
                  <th>สินค้า</th>
                  <th>หมวดหมู่</th>
                  <th>คงเหลือ</th>
                  <th>หน่วย</th>
                  <th>ราคา</th>
                  <th>จุดสั่งซื้อ</th>
                  <th class="actions-col">จัดการ</th>
                </tr>
              </thead>
              <tbody id="allProductsTable">
                <tr>
                  <td colspan="7" class="placeholder">
                    กำลังโหลดรายการสินค้า...
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </section>
      </div>
    </main>

    <footer class="footer">
      <div class="container">
        <small>Updated just now • ข้อมูลตัวอย่างสำหรับระบบ Product Management</small>
      </div>
    </footer>

    <script type="module" src="js/app.js"></script>
  </body>
</html>
